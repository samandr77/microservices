definitions:
  api.BlockUserRequest:
    properties:
      user_id:
        type: string
    type: object
  api.BlockUserResponse:
    properties:
      status:
        type: string
      user_id:
        type: string
    type: object
  api.CreateUserRequest:
    properties:
      address_reg:
        type: string
      birthdate:
        type: string
      city:
        type: string
      code:
        type: string
      email:
        type: string
      first_name:
        type: string
      issued_by:
        type: string
      issued_date:
        type: string
      last_name:
        type: string
      middle_name:
        type: string
      newsletter_agreed:
        type: boolean
      number:
        type: string
      personal_info:
        type: string
      phone:
        type: string
      place_of_education:
        type: string
      privacy_policy_agreed:
        type: boolean
      public_donations_agreed:
        type: boolean
      school_name:
        type: string
      series:
        type: string
      sub:
        type: string
      sub_alt:
        type: string
    type: object
  api.CreateUserResponse:
    properties:
      user_id:
        type: string
    type: object
  api.DeleteUserResponse:
    properties:
      message:
        type: string
    type: object
  api.EmptyResponse:
    type: object
  api.ErrorResponse:
    properties:
      message:
        type: string
    type: object
  api.GetUserByIDResponse:
    properties:
      birthdate:
        type: string
      email:
        type: string
      first_name:
        type: string
      last_name:
        type: string
      middle_name:
        type: string
      phone:
        type: string
      role_id:
        type: string
      role_name:
        type: string
      user_id:
        type: string
    type: object
  api.GetUserProfileResponse:
    properties:
      address_reg:
        type: string
      birthdate:
        type: string
      city:
        type: string
      code:
        type: string
      email:
        type: string
      first_name:
        type: string
      issued_by:
        type: string
      issued_date:
        type: string
      last_name:
        type: string
      middle_name:
        type: string
      newsletter_agreed:
        type: boolean
      number:
        type: string
      personal_info:
        type: string
      phone:
        type: string
      place_of_education:
        type: string
      privacy_policy_agreed:
        type: boolean
      public_donations_agreed:
        type: boolean
      school_name:
        type: string
      series:
        type: string
      user_id:
        type: string
    type: object
  api.RestoreUserRequest:
    properties:
      user_id:
        type: string
    type: object
  api.RestoreUserResponse:
    properties:
      status:
        type: string
      user_id:
        type: string
    type: object
  api.SearchUserResponse:
    properties:
      block_type:
        type: string
      email:
        type: string
      role_id:
        type: string
      role_name:
        type: string
      status:
        type: string
      user_id:
        type: string
    type: object
  api.TemporaryBlockUserRequest:
    properties:
      user_id:
        type: string
    type: object
  api.TemporaryBlockUserResponse:
    properties:
      block_type:
        type: integer
      expires_at:
        type: string
      status:
        type: string
      user_id:
        type: string
    type: object
  api.UnblockUserRequest:
    properties:
      user_id:
        type: string
    type: object
  api.UnblockUserResponse:
    properties:
      status:
        type: string
      user_id:
        type: string
    type: object
  api.UpdateUserRequest:
    properties:
      address_reg:
        type: string
      birthdate:
        type: string
      city:
        type: string
      code:
        type: string
      email:
        type: string
      first_name:
        type: string
      issued_by:
        type: string
      issued_date:
        type: string
      last_name:
        type: string
      middle_name:
        type: string
      newsletter_agreed:
        type: boolean
      number:
        type: string
      personal_info:
        type: string
      phone:
        type: string
      place_of_education:
        type: string
      privacy_policy_agreed:
        type: boolean
      public_donations_agreed:
        type: boolean
      school_name:
        type: string
      series:
        type: string
      sub:
        type: string
      sub_alt:
        type: string
      user_id:
        type: string
    type: object
  api.UpdateUserResponse:
    properties:
      user_id:
        type: string
    type: object
  service.ProfileUpdateData:
    properties:
      address_reg:
        type: string
      birthdate:
        type: string
      city:
        type: string
      code:
        type: string
      first_name:
        type: string
      issued_by:
        type: string
      issued_date:
        type: string
      last_name:
        type: string
      middle_name:
        type: string
      number:
        type: string
      personal_info:
        type: string
      phone:
        type: string
      place_of_education:
        type: string
      school_name:
        type: string
      series:
        type: string
    type: object
info:
  contact: {}
paths:
  /api/health:
    get:
      consumes:
      - application/json
      description: Проверяет, что сервер работает
      produces:
      - application/json
      responses:
        "200":
          description: Сервер работает!
          schema:
            type: string
      summary: Проверка состояния сервиса
      tags:
      - health
  /internal/users:
    get:
      consumes:
      - application/json
      description: Поиск пользователя по email, sub или sub_alt
      parameters:
      - description: Email пользователя
        in: query
        name: email
        type: string
      - description: Сбер ID (sub)
        in: query
        name: sub
        type: string
      - description: Альтернативный Сбер ID (sub_alt)
        in: query
        name: sub_alt
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.SearchUserResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: Поиск пользователя
      tags:
      - users
  /internal/users/{user_id}:
    get:
      consumes:
      - application/json
      description: Получить полные данные профиля пользователя по ID
      parameters:
      - description: ID пользователя
        in: path
        name: user_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.GetUserByIDResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: Получение профиля пользователя
      tags:
      - users
  /internal/users/create:
    post:
      consumes:
      - application/json
      description: Создает нового пользователя (по email или через Сбер ID)
      parameters:
      - description: Запрос на создание пользователя
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.CreateUserRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/api.CreateUserResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "422":
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: Создание пользователя
      tags:
      - users
  /internal/users/restore:
    post:
      consumes:
      - application/json
      description: Восстановление удалённого аккаунта по user_id (без авторизации)
      parameters:
      - description: User ID для восстановления
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.RestoreUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.RestoreUserResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "410":
          description: Период восстановления истёк
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "422":
          description: Невалидный статус пользователя
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: Восстановить удалённый аккаунт
      tags:
      - users
  /internal/users/temporary-block:
    post:
      consumes:
      - application/json
      description: Временная блокировка пользователя для внутренних сервисов
      parameters:
      - description: Запрос на временную блокировку
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.TemporaryBlockUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.TemporaryBlockUserResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: Временная блокировка пользователя (internal)
      tags:
      - internal
  /internal/users/update:
    put:
      consumes:
      - application/json
      description: Обновляет данные пользователя
      parameters:
      - description: Запрос на обновление пользователя
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.UpdateUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.UpdateUserResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "422":
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      summary: Обновление пользователя
      tags:
      - users
  /users/block:
    post:
      consumes:
      - application/json
      description: Блокировка пользователя на время или на постоянно (только для служб
        безопасности)
      parameters:
      - description: Запрос на блокировку
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.BlockUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.BlockUserResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "422":
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - SecurityToken: []
      summary: Заблокировать пользователя
      tags:
      - security
  /users/me:
    delete:
      consumes:
      - application/json
      description: Мягкое удаление собственного аккаунта
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.DeleteUserResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Удалить аккаунт пользователя
      tags:
      - users
    get:
      consumes:
      - application/json
      description: Получить полные данные профиля авторизованного пользователя
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.GetUserProfileResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Получение собственного профиля
      tags:
      - users
  /users/unblock:
    post:
      consumes:
      - application/json
      description: Разблокировка постоянно заблокированного пользователя (только для
        служб безопасности)
      parameters:
      - description: Запрос на разблокировку
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/api.UnblockUserRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.UnblockUserResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "422":
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - SecurityToken: []
      summary: Разблокировать пользователя
      tags:
      - security
  /users/update:
    put:
      consumes:
      - application/json
      description: Обновляет профиль авторизованного пользователя из личного кабинета
      parameters:
      - description: Запрос на обновление профиля
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/service.ProfileUpdateData'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/api.EmptyResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/api.ErrorResponse'
        "422":
          description: Unprocessable Entity
          schema:
            $ref: '#/definitions/api.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Обновление профиля пользователя
      tags:
      - users
swagger: "2.0"
